{"version":3,"sources":["webpack:///./src/models/destinations.tsx","webpack:///./src/components/book-ticket.tsx","webpack:///./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack:///./src/pages/details.tsx"],"names":["Destinations","find","id","isFeatured","JSONData","featured","carousel","items","dest","BookTicket","props","saveItems","cart","JSON","parse","localStorage","getItem","adults","state","children","currency","price","setItem","stringify","window","dispatchEvent","Event","changeTickets","key","newValue","safeInt","parseInt","setState","navigate","bind","self","ReferenceError","render","className","title","map","item","onClick","type","value","onChange","e","target","this","callback","React","Component","DetailsPage","location","data","pageId","body","split","join","mobile","isMobile","windowSize","useWindowSize","mediaUrl","media","url","goesBack","style","width","height","src","currencyCode","unit"],"mappings":"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","file":"component---src-pages-details-tsx-f99fa6e1577baa59be65.js","sourcesContent":["import { Destination } from './destination'\n\nimport JSONData from '../data/data.json'\n\nexport class Destinations {\n  featured: Destination[];\n  carousel: {\n    items: Destination[];\n  };\n\n  static find (id: string, isFeatured: boolean = false) {\n    if(!id) {\n      return;\n    }\n    const list: Destination[] = isFeatured ? [...JSONData.featured]\n      : [...JSONData.carousel.items];\n    return list.find(dest => dest.id === id);\n  }\n}\n","import React from 'react'\nimport BookButton from './book-button'\nimport { Cart, CartItem } from '../models/cart'\nimport { navigate } from 'gatsby'\nimport { Ticket } from '../models/ticket'\n\nclass BookTicket extends React.Component<Ticket> {\n  constructor (props: Ticket) {\n    super(props)\n    this.state = {\n      adults: 1,\n      children: 0,\n    }\n\n    if (!props.id && typeof window !== 'undefined') {\n      navigate('/')\n    }\n    const cart = JSON.parse(localStorage.getItem('cart') || '{}')\n    if (cart[props.id]) {\n      this.state = {\n        adults: cart[props.id].adults,\n        children: cart[props.id].children,\n      }\n    }\n    this.saveItems = this.saveItems.bind(this)\n  }\n\n  saveItems = () => {\n    const cart: Cart = JSON.parse(localStorage.getItem('cart') || '{}')\n    cart[this.props.id] = {\n      id: this.props.id,\n      adults: this.state.adults,\n      children: this.state.children,\n      currency: this.props.currency,\n      price: this.props.price,\n    } as CartItem\n    localStorage.setItem('cart', JSON.stringify(cart))\n    if (typeof window !== 'undefined') {\n      window.dispatchEvent(new Event('cart'))\n    }\n  }\n\n  changeTickets = (key: string, newValue: string) => {\n    const safeInt = parseInt(newValue, 10)\n    if (safeInt < 0) {\n      return\n    }\n    if (key === 'adults') {\n      this.setState({adults: safeInt})\n    } else {\n      this.setState({children: safeInt})\n    }\n  }\n\n  render () {\n    const audience = [\n      {title: 'Adults', key: 'adults'},\n      {title: 'Children', key: 'children'},\n    ]\n\n    return (\n      <div className='pt-4 mb-6 px-4'>\n        {audience.map(item => (\n          <div className='mb-4' key={item.key}>\n            <span className='ticket-audience text-dark-222'>{item.title}</span>\n            <div className='flex items-center'>\n              <button\n                className='h-10 w-10 bg-black flex items-center justify-center'\n                onClick={() => this.changeTickets(item.key,\n                  this.state[item.key] - 1)}>\n                <span className='minus w-5 bg-white'></span>\n              </button>\n              <input type='text'\n                     className='h-10 w-20 mx-3 text-center border border-black border-solid'\n                     value={this.state[item.key]}\n                     onChange={e => this.changeTickets(item.key,\n                       e.target.value)}/>\n              <button\n                className='h-10 w-10 bg-black flex items-center justify-center'\n                onClick={() => this.changeTickets(item.key,\n                  this.state[item.key] + 1)}>\n                <span className='plus w-5 bg-white flex justify-center'></span>\n              </button>\n            </div>\n          </div>\n        ))}\n\n        <p\n          className='ticket-audience text-dark-222 font-bold mb-8 mt-12 pt-2'>Total {this.props.currency}{this.props.price *\n        (this.state.adults + this.state.children)}</p>\n\n        <BookButton id={this.props.id} featured={this.props.featured}\n                    callback={this.saveItems}/>\n      </div>\n    )\n  }\n}\n\nexport default BookTicket\n","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import React from 'react'\n\nimport Layout from '../components/layout'\nimport SEO from '../components/seo'\nimport { Destinations } from '../models/destinations'\nimport BookTicket from '../components/book-ticket'\nimport ReactMarkdown from 'react-markdown'\nimport useWindowSize from '../hooks/window-size'\nimport isMobile from '../utils/mobile'\nimport { navigate } from 'gatsby'\n\nconst DetailsPage = ({location}) => {\n  const data = Destinations.find(location?.state?.pageId,\n    location?.state?.featured)\n\n  if (!data && typeof window !== 'undefined') {\n    navigate('/')\n  }\n\n  const body = data?.body?.split('\\n').join('\\n\\n')\n  const mobile: boolean = isMobile()\n  const windowSize = useWindowSize()\n\n  let mediaUrl = data?.media['small']?.url\n  if (location.state.featured && !mobile) {\n    mediaUrl = data?.media['large']?.url\n  }\n\n  return (\n    <Layout goesBack={true}>\n      <SEO title=\"Details page\"/>\n      <div className='lg:flex w-full lg:flex-wrap lg:px-5'>\n        <div className='image-holder lg:w-9/12'>\n          <img style={{\n            width: isMobile() ? `${windowSize.width}px` : '100%',\n            height: isMobile() ? `${windowSize.width}px` : '100%',\n          }} src={mediaUrl}/>\n        </div>\n\n        <div className='lg:w-3/12'>\n          <div className='pt-6 px-4 lg:pt-0'>\n            <h2 className='featured-title pb-3 text-black'>{data.title}</h2>\n            <p\n              className='featured-cost pb-4 text-black'>{`From ${data.price.currencyCode ===\n            'GBP' ? '£' : ''}${data.price.value} ${data.price.unit}`}</p>\n          </div>\n\n          <BookTicket id={location.state.pageId}\n                      featured={location.state.featured}\n                      price={data.price.value}\n                      currency={data.price.currencyCode === 'GBP' ? '£' : ''}/>\n        </div>\n\n        <div className='pt-4 mb-6 px-4 lg:w-8/12'>\n          <ReactMarkdown children={body}/>\n        </div>\n      </div>\n    </Layout>\n  )\n}\n\nexport default DetailsPage\n"],"sourceRoot":""}