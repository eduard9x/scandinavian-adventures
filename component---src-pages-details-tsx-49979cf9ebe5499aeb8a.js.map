{"version":3,"sources":["webpack:///./src/models/destinations.tsx","webpack:///./src/components/book-ticket.tsx","webpack:///./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack:///./src/hooks/window-size.tsx","webpack:///./src/pages/details.tsx"],"names":["Destinations","find","id","isFeatured","JSONData","featured","carousel","items","dest","BookTicket","props","saveItems","window","cart","JSON","parse","localStorage","getItem","adults","state","children","currency","price","setItem","stringify","dispatchEvent","Event","changeTickets","key","newValue","safeInt","parseInt","setState","navigate","bind","self","ReferenceError","render","className","title","map","item","onClick","type","value","onChange","e","target","this","callback","React","Component","useWindowSize","useState","width","height","windowSize","setWindowSize","useEffect","handleResize","innerWidth","innerHeight","addEventListener","removeEventListener","DetailsPage","location","data","pageId","body","split","join","style","src","media","url","currencyCode","unit"],"mappings":"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","file":"component---src-pages-details-tsx-49979cf9ebe5499aeb8a.js","sourcesContent":["import { Destination } from './destination'\n\nimport JSONData from '../data/data.json'\n\nexport class Destinations {\n  featured: Destination[];\n  carousel: {\n    items: Destination[];\n  };\n\n  static find (id: string, isFeatured: boolean = false) {\n    if(!id) {\n      return;\n    }\n    const list: Destination[] = isFeatured ? [...JSONData.featured]\n      : [...JSONData.carousel.items];\n    return list.find(dest => dest.id === id);\n  }\n}\n","import React from 'react'\nimport BookButton from './book-button'\nimport { Cart, CartItem } from '../models/cart'\nimport { navigate } from 'gatsby'\nimport { Ticket } from '../models/ticket'\n\nclass BookTicket extends React.Component<Ticket> {\n  constructor (props: Ticket) {\n    super(props)\n    this.state = {\n      adults: 1,\n      children: 0,\n    }\n\n    if (typeof window !== 'undefined') {\n      if (!props.id) {\n        navigate('/')\n      }\n      const cart = JSON.parse(localStorage?.getItem('cart') || '{}')\n      if (cart[props.id]) {\n        this.state = {\n          adults: cart[props.id].adults,\n          children: cart[props.id].children,\n        }\n      }\n    }\n    this.saveItems = this.saveItems.bind(this)\n  }\n\n  saveItems = () => {\n    if (typeof window === 'undefined') {\n      return;\n    }\n    const cart: Cart = JSON.parse(localStorage.getItem('cart') || '{}')\n    cart[this.props.id] = {\n      id: this.props.id,\n      adults: this.state.adults,\n      children: this.state.children,\n      currency: this.props.currency,\n      price: this.props.price,\n    } as CartItem\n    localStorage.setItem('cart', JSON.stringify(cart))\n    window.dispatchEvent(new Event('cart'))\n  }\n\n  changeTickets = (key: string, newValue: string) => {\n    const safeInt = parseInt(newValue, 10)\n    if (safeInt < 0) {\n      return\n    }\n    if (key === 'adults') {\n      this.setState({adults: safeInt})\n    } else {\n      this.setState({children: safeInt})\n    }\n  }\n\n  render () {\n    const audience = [\n      {title: 'Adults', key: 'adults'},\n      {title: 'Children', key: 'children'},\n    ]\n\n    return (\n      <div className='pt-4 mb-6 px-4'>\n        {audience.map(item => (\n          <div className='mb-4' key={item.key}>\n            <span className='ticket-audience text-dark-222'>{item.title}</span>\n            <div className='flex items-center'>\n              <button\n                className='h-10 w-10 bg-black flex items-center justify-center'\n                onClick={() => this.changeTickets(item.key,\n                  this.state[item.key] - 1)}>\n                <span className='minus w-5 bg-white'></span>\n              </button>\n              <input type='text'\n                     className='h-10 w-20 mx-3 text-center border border-black border-solid'\n                     value={this.state[item.key]}\n                     onChange={e => this.changeTickets(item.key,\n                       e.target.value)}/>\n              <button\n                className='h-10 w-10 bg-black flex items-center justify-center'\n                onClick={() => this.changeTickets(item.key,\n                  this.state[item.key] + 1)}>\n                <span className='plus w-5 bg-white flex justify-center'></span>\n              </button>\n            </div>\n          </div>\n        ))}\n\n        <p\n          className='ticket-audience text-dark-222 font-bold mb-8 mt-12 pt-2'>Total {this.props.currency}{this.props.price *\n        (this.state.adults + this.state.children)}</p>\n\n        <BookButton id={this.props.id} featured={this.props.featured}\n                    callback={this.saveItems}/>\n      </div>\n    )\n  }\n}\n\nexport default BookTicket\n","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import { useEffect, useState } from 'react'\n\nconst useWindowSize = () => {\n  if (typeof window === 'undefined') {\n    return {};\n  }\n\n  const [windowSize, setWindowSize] = useState({\n    width: 0,\n    height: 0,\n  })\n\n  useEffect(() => {\n    function handleResize () {\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      })\n    }\n\n    window.addEventListener('resize', handleResize)\n\n    handleResize()\n\n    return () => window.removeEventListener('resize', handleResize)\n  }, [])\n\n  return windowSize\n}\n\nexport default useWindowSize\n","import React from 'react'\n\nimport Layout from '../components/layout'\nimport SEO from '../components/seo'\nimport { Destinations } from '../models/destinations'\nimport BookTicket from '../components/book-ticket'\nimport ReactMarkdown from 'react-markdown'\nimport useWindowSize from '../hooks/window-size'\nimport { navigate } from 'gatsby'\n\nconst DetailsPage = ({location}) => {\n  const data = Destinations.find(location?.state?.pageId,\n    location?.state?.featured)\n\n  if (!data && typeof window !== 'undefined') {\n    navigate('/')\n  }\n\n  const body = data?.body?.split('\\n').join('\\n\\n')\n  const windowSize: { width?: number, height?: number } = useWindowSize()\n\n  return (\n    <Layout>\n      <SEO title=\"Details page\"/>\n      <div className='lg:flex w-full lg:flex-wrap lg:px-5'>\n        <div className='image-holder lg:w-9/12'>\n          <img style={{\n            width: `${windowSize?.width}px`,\n            height: `${windowSize?.width}px`,\n          }} className='block sm:hidden' src={data?.media['small']?.url}/>\n          <img className='hidden sm:block w-full' src={data?.media['large']?.url}/>\n        </div>\n\n        <div className='lg:w-3/12'>\n          <div className='pt-6 px-4 lg:pt-0'>\n            <h2 className='featured-title pb-3 text-black'>{data?.title}</h2>\n            <p\n              className='featured-cost pb-4 text-black'>{`From ${data?.price?.currencyCode ===\n            'GBP' ? '£' : ''}${data?.price?.value} ${data?.price?.unit}`}</p>\n          </div>\n\n          <BookTicket id={location?.state?.pageId}\n                      featured={location?.state?.featured}\n                      price={data?.price?.value}\n                      currency={data?.price?.currencyCode === 'GBP' ? '£' : ''}/>\n        </div>\n\n        <div className='pt-4 mb-6 px-4 lg:w-8/12'>\n          <ReactMarkdown children={body}/>\n        </div>\n      </div>\n    </Layout>\n  )\n}\n\nexport default DetailsPage\n"],"sourceRoot":""}